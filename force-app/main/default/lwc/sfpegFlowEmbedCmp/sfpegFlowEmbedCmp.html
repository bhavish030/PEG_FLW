<template>
    <!-- Component Display -->
    <div class={wrappingCss}>
        <template lwc:if={isReady}>
            <lightning-flow flow-api-name={flowName}
                            flow-input-variables={flowParameters}
                            flow-finish-behavior="NONE"
                            onstatuschange={handleStatusChange} >
            </lightning-flow>
        </template>
        <template lwc:else>
            <lightning-icon icon-name="utility:error" alternative-text="Error!" variant="error" title="Error!" size="small">
            </lightning-icon>
            &nbsp;
            <lightning-formatted-text class="slds-text-color_error" value={error}></lightning-formatted-text>
        </template>
    </div>

    <!-- Debug Information -->
    <template lwc:if={isDebug}>
        <div class="slds-box slds-theme_default slds-m-top_small"  >
            <dl class="slds-dl_horizontal">
                <dt class="slds-dl_horizontal__label slds-truncate">Flow:</dt>
                <dd class="slds-dl_horizontal__detail">{flowName}</dd>
                <dt class="slds-dl_horizontal__label slds-truncate">Flow Input:</dt>
                <dd class="slds-dl_horizontal__detail">{flowInputs}</dd>
                <dt class="slds-dl_horizontal__label slds-truncate">Flow Output:</dt>
                <dd class="slds-dl_horizontal__detail">Target: {outputTarget} / Refresh: {outputRefresh}</dd>
                <dt class="slds-dl_horizontal__label slds-truncate">Documentation:</dt>
                <dd class="slds-dl_horizontal__detail">
                    <lightning:formattedUrl     value="https://github.com/pegros/PEG_FLW/blob/master/help/sfpegFlowEmbedCmp.md"
                                                label="See Help on GitHub"
                                                target="_blank">
                    </lightning:formattedUrl>
                </dd>
            </dl>
        </div>
    </template>
</template>